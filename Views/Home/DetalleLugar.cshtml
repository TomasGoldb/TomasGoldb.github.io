<script>
        // Esta función se ejecutará cuando la API se haya cargado correctamente
        function initMap() {
            // Asegurarnos de que el objeto google esté disponible
            if (typeof google === "undefined" || !google.maps) {
                console.error("La API de Google Maps no se ha cargado correctamente.");
                return;
            }

            // Crear un mapa invisible solo para inicializar el servicio de lugares
            const map = new google.maps.Map(document.createElement('div')); 

            // Inicializar el servicio de lugares
            placeService = new google.maps.places.PlacesService(map);
            console.log('El servicio de lugares está disponible:', placeService); // Verificación en consola
        }

        function fetchPlaceDetails(placeId) {
            if (!placeService) {
                console.error("El servicio de lugares no está disponible.");
                return;
            }

            const request = {
        placeId: placeId
    };

    // Realizar la solicitud para obtener detalles del lugar
    placeService.getDetails(request, (place, status) => {
        const resultDiv = document.getElementById('result');
        if (status === google.maps.places.PlacesServiceStatus.OK) {
            resultDiv.innerHTML = `
                <h2>${place.name}</h2>
                <p><strong>Dirección:</strong> ${place.formatted_address || 'No disponible'}</p>
                <p><strong>Teléfono:</strong> ${place.formatted_phone_number || 'No disponible'}</p>
                <p><strong>Reviews</strong> ${place.reviews[0].author_name || 'No disponible'}</p>
                <p><strong>Calificación:</strong> ${place.rating || 'No disponible'} (${place.user_ratings_total || 0} reseñas)</p>
                <p><strong>Sitio web:</strong> ${place.website ? `<a href="${place.website}" target="_blank">${place.website}</a>` : 'No disponible'}</p>
            `;

            for(let i=0;i<place.reviews.length;i++){
                reviews.innerHTML+=`
                <div class="review">
                <div class= "container-foto-user">
                    <div class="avatar">J</div>
                        <p class="user-nombre"><b>${place.reviews[i].author_name}</b></p>
                </div>
                    <div class="review-content">
                        <p id="texto">${place.reviews[i].text}</p>
                        <a id="verMasBtn" href="#">Ver más...</a>
                    <div class= "container-foto-user">
                        <div class="avatar">
                            <img class="imagenPerfil" src="${profile_photo_urlx}">
                            <p class="user-nombre"><b>Martin Rojas</b></p>
                        </div>
                        <div class="rating">
                        @{
                            double cantEstrellas=3.5;
                            for(int i=0;i<5;i++){
                                if(cantEstrellas>=1){
                                    <img class="estrellita" src="/img/estrellitaFull.svg">
                                    cantEstrellas-=1;
                                }
                                else if(cantEstrellas==0.5){
                                    <img class="estrellita" src="/img/mediaEstrellita.svg">
                                    cantEstrellas-=0.5;
                                }else{
                                    <img class="estrellita" src="/img/estrellitaVacia.svg">
                                    
                                }
                               
                            }
                        }
                        </div>
                    </div>
                <div class="review-content">
                    <p>La comida de este lugar es increíble! Me gusta que las opciones para comer vayan cambiando dependiendo del día.La comida de este lugar es increíble! Me gusta que las opciones para comer vayan cambiando dependiendo del díaLa comida de este lugar es increíble! Me gusta que las opciones para comer vayan cambiando dependiendo del día</p>
                    <a href="#">Ver más...</a>
                </div>
                </div>
                `
            }

        } else {
            resultDiv.innerHTML = '<p class="error">No se pudo obtener los detalles del lugar. Estado: ' + status + '</p>';
        }

        // Limpiar resultados
        document.getElementById('predictions').innerHTML = '';
        document.getElementById('placeInput').value = '';
    });
    
        }
    </script>

<h1 class="titulo-homehome">Detalles del Lugar</h1>

<div class="container">
        <h2>Menorá House</h2>

        <div class="content">
        
            <div class="reviews">
                <div class="review">
                <div class= "container-foto-user">
                    <div class="avatar">J</div>
                        <p class="user-nombre"><b>Martin Rojas</b></p>
                </div>
                    <div class="review-content">
                        <p id="texto">La comida de este lugar es increíble!</p>
                        <a id="verMasBtn" href="#">Ver más...</a>
                    <div class= "container-foto-user">
                        <div class="avatar">
                            <img class="imagenPerfil" src="/img/perfil.webp">
                            <p class="user-nombre"><b>Martin Rojas</b></p>
                        </div>
                        <div class="rating">
                        @{
                            double cantEstrellas=3.5;
                            for(int i=0;i<5;i++){
                                if(cantEstrellas>=1){
                                    <img class="estrellita" src="/img/estrellitaFull.svg">
                                    cantEstrellas-=1;
                                }
                                else if(cantEstrellas==0.5){
                                    <img class="estrellita" src="/img/mediaEstrellita.svg">
                                    cantEstrellas-=0.5;
                                }else{
                                    <img class="estrellita" src="/img/estrellitaVacia.svg">
                                    
                                }
                               
                            }
                        }
                        </div>
                    </div>
                <div class="review-content">
                    <p>La comida de este lugar es increíble! Me gusta que las opciones para comer vayan cambiando dependiendo del día.La comida de este lugar es increíble! Me gusta que las opciones para comer vayan cambiando dependiendo del díaLa comida de este lugar es increíble! Me gusta que las opciones para comer vayan cambiando dependiendo del día</p>
                    <a href="#">Ver más...</a>
                </div>
                </div>
                <div class="review">
                    <div class= "container-foto-user">
                        <div class="avatar">
                            <img class="imagenPerfil" src="/img/perfil.webp">
                            <p class="user-nombre"><b>Martin Rojas</b></p>
                        </div>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                <div class="review-content">
                    <p>Me gusta que las opciones para comer vayan cambiando dependiendo del día.</p>
                    <a href="#">Ver más...</a>
                </div>
                </div>
                
               <div class="review">
                    <div class= "container-foto-user">
                        <div class="avatar">
                            <img class="imagenPerfil" src="/img/perfil.webp">
                            <p class="user-nombre"><b>Martin Rojas</b></p>
                        </div>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                <div class="review-content">
                    <p>La comida de este lugar es increíble!</p>
                    <a href="#">Ver más...</a>
                </div>
                </div>

               <<div class="review">
                    <div class= "container-foto-user">
                        <div class="avatar">
                            <img class="imagenPerfil" src="/img/perfil.webp">
                            <p class="user-nombre"><b>Martin Rojas</b></p>
                        </div>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                <div class="review-content">
                    <p>La comida de este lugar es increíble!</p>
                    <a href="#">Ver más...</a>
                </div>
                </div>

                <div class="review">
                    <div class= "container-foto-user">
                        <div class="avatar">
                            <img class="imagenPerfil" src="/img/perfil.webp">
                            <p class="user-nombre"><b>Martin Rojas</b></p>
                        </div>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                <div class="review-content">
                    <p>La comida de este lugar es increíble!</p>
                    <a href="#">Ver más...</a>
                </div>
                </div>

               <div class="review">
                    <div class= "container-foto-user">
                        <div class="avatar">
                            <img class="imagenPerfil" src="/img/perfil.webp">
                            <p class="user-nombre"><b>Martin Rojas</b></p>
                        </div>
                        <div class="rating">⭐⭐⭐⭐⭐</div>
                    </div>
                <div class="review-content">
                    <p>La comida de este lugar es increíble!</p>
                    <a href="#">Ver más...</a>
                </div>
                </div>
            </div>

            <div class="map-section">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3283.7648622520373!2d-58.43169132341747!3d-34.610106957837075!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95bcca680bfa27bf%3A0xbe46c582c334f5c2!2sMenora%20House!5e0!3m2!1ses!2sar!4v1730392844380!5m2!1ses!2sar" 
                width="600" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                <p class="txt-detallelugar"><b>Tipo de lugar:</b> Restaurante</p>
                <p class="txt-detallelugar"><b>Transportes para llegar:</b></p>
                <div class="transport">
                    <p class="bus red">148</p>
                    <p class="bus red">110</p>
                    <p class="bus red">160</p>
                    <p class="bus yellow">65</p>
                    <p class="subway green">B</p>
                    <p class="subway light-green">E</p>
                    <p class="subway blue">A</p>
                </div>
                <div class="container-boton-volver-detallelugar"><button class="boton-volver-detallelugar">Volver</button></div>
            </div>
        </div>
    </div>
    <div id="result"></div>
    <div id="predictions"></div>
    <input id="placeInput" type="text" placeholder="Buscar lugar">

<script src="/js/maps.js"></script>
    <script>
 // Ejecutamos la función de ejemplo después de que la API de Google Maps esté cargada
        function testPlaceDetails() {
            fetchPlaceDetails("ChIJc3ppC2jKvJURyQ3P9zmN-rY");
        }

        // Esperamos a que la API cargue para ejecutar la prueba
        window.onload = function () {
            testPlaceDetails(); 
        }
   
    
    const textoCompleto = "Este es el texto completo que queremos mostrar. Aquí hay más información que será visible solo al hacer clic en el botón 'Ver más'.";
const longitudVisible = 100; // Número máximo de caracteres a mostrar inicialmente

// Función para obtener el texto visible sin cortar palabras
function obtenerTextoVisible(texto, longitud) {
    if (texto.length <= longitud) return texto; // Si el texto es más corto, devuélvelo todo
    
    let puntoCorte = texto.lastIndexOf(' ', longitud); // Encuentra el último espacio antes de la longitud
    return puntoCorte > 0 ? texto.substring(0, puntoCorte) : texto.substring(0, longitud); // Devuelve el texto hasta el último espacio
}

// Divide el texto en partes
const textoVisible = obtenerTextoVisible(textoCompleto, longitudVisible);
const textoAdicional = textoCompleto.substring(textoVisible.length);

// Muestra la parte visible y oculta el resto
document.getElementById('texto').innerHTML = textoVisible + '<span id="textoAdicional" style="display:none;">' + textoAdicional + '</span>';

document.getElementById('verMasBtn').addEventListener('click', function() {
    const textoAdicionalElement = document.getElementById('textoAdicional');
    if (textoAdicionalElement.style.display === 'none') {
        textoAdicionalElement.style.display = 'inline';
        this.textContent = 'Ver menos';
    } else {
        textoAdicionalElement.style.display = 'none';
        this.textContent = 'Ver más';
    }
});


    </script>



    


    <div id="result"></div>
    <div id="predictions"></div>
    <input id="placeInput" type="text" placeholder="Buscar lugar">

